# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#      http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
version: '3.4'
services:
  mongodb:
    image: mongo:3.6
    ports:
      - "27017:27017"
    volumes:
      - ./data/mongodb:/data/db
  jira-collector:
    build: ./jira-collector
    ports:
      - "8080:8080"
  gitlab-scm-collector:
    build: ./gitlab-scm-collector
    ports:
      - "8081:8081"
  api:
    build: ./hygieia-starter-kit
    depends_on:
      - mongodb
#      - jira-collector
#      - gitlab-scm-collector
    ports:
      - "8080:8080"
    environment: 
      - PROXY_URL=
      - PROXY_PORT=
      - PROXY_USERNAME=
      - PROXY_PASSWORD=
    #privileged: true ## I hope we don't need this
# If you want to view logs locally or have mongo data persisted uncomment out the below. 
#    volumes:
# This is for getting container logs locally
#      - './logs:/hygieia/logs'
# This is for persisting data after the container has stopped
#      - './db/data:/var/lib/mongo'



  
